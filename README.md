# 화장품 품질관리 법규 검토 툴

화장품법 및 광고표시법 위반사항을 자동으로 검출하는 생산성 향상 도구입니다.

## 🎯 프로젝트 목적

이 툴은 화장품 품질관리팀에서 사용할 수 있도록 개발되었으며, 다음과 같은 목적으로 만들어졌습니다:
- **제품 판촉물, 온라인 상세페이지, 제품 패키지** 등의 이미지나 PDF 파일 검토
- **화장품법 및 광고표시법 위반사항** 1차 검토 자동화
- **생산성 향상**을 통한 업무 효율성 증대
- **코드 학습**을 위한 스텝바이스텝 개발 접근

## ✨ 주요 기능

### 현재 구현된 기능 (Phase 1 + 2 + 3 완료!)
- 📄 **다양한 파일 형식 지원**: PDF, DOCX, PPTX, TXT, 이미지 파일
- 🔍 **키워드 기반 위반사항 검출**: 정규표현식을 활용한 정확한 패턴 매칭
- 🤖 **AI 정밀 분석**: Claude API를 활용한 맥락적 법규 분석
- 🏠 **로컬 AI 분석**: Ollama를 사용한 완전 오프라인 AI 분석
- 📈 **하이브리드 분석**: 세 가지 모드의 성능 비교 및 최적 모드 추천
- ⚖️ **법규 위반 유형 분류**:
  - 의약품적 표현 (치료, 완치, 의학적 효과 등)
  - 효능 과장 (100% 효과, 즉시, 완벽한 등)
  - 안전성 허위 (부작용 없음, 100% 안전 등)
  - 최상급 표현 (최고, 1위, 세계 최초 등)
  - 비교광고 위반 (타제품보다, 경쟁사보다 등)
- 📊 **심각도 분류**: 높음/중간/낮음 3단계 위험도 평가
- 💡 **개선 제안**: 각 위반사항에 대한 구체적인 수정 방안 제시
- 🎯 **3가지 분석 모드**: 키워드/Claude AI/로컬 AI 자유 선택
- 💰 **비용 관리**: 일일/월간 사용량 제한 및 실시간 모니터링
- 🔒 **완전한 개인정보 보호**: 로컬 AI로 민감한 문서도 안전하게 분석
- 🖥️ **직관적인 GUI**: 사용하기 쉬운 그래픽 인터페이스
- 💾 **결과 저장**: 검토 결과를 텍스트 파일로 내보내기

## 🚀 빠른 시작

### 1. 필수 요구사항
- Python 3.9 이상
- macOS, Windows, Linux 지원

### 2. 설치 방법

```bash
# 1. 저장소 클론
git clone [저장소 URL]
cd dayoungmon

# 2. 가상환경 생성 및 활성화
python3 -m venv cosmetics_checker_env
source cosmetics_checker_env/bin/activate  # macOS/Linux
# cosmetics_checker_env\Scripts\activate  # Windows

# 3. 필요한 라이브러리 설치
pip install -r requirements.txt

# 4. (선택사항) 이미지 OCR을 위한 Tesseract 설치
# macOS
brew install tesseract tesseract-lang

# Ubuntu/Debian
sudo apt-get install tesseract-ocr tesseract-ocr-kor

# Windows
# https://github.com/UB-Mannheim/tesseract/wiki 참조

# 5. (선택사항) AI 분석을 위한 API 키 설정
cp .env.example .env
# .env 파일을 열어서 ANTHROPIC_API_KEY에 실제 API 키 입력

# 6. (선택사항) 로컬 AI를 위한 Ollama 설치
# macOS: https://ollama.ai/download 에서 .dmg 파일 다운로드 후 설치
# 설치 후 터미널에서 실행:
# ollama serve &
# ollama pull solar-ko:10.7b  # 한국어 특화 모델 (7.5GB)
# 또는 ollama pull llama3.2:3b  # 일반 모델 (2.0GB)
```

### 3. 실행 방법

#### GUI 모드 (권장)
```bash
source cosmetics_checker_env/bin/activate
python main.py
```

#### 테스트 모드
```bash
source cosmetics_checker_env/bin/activate
python test_basic.py             # 기본 기능 테스트
python test_ai_features.py       # Claude AI 기능 테스트
python test_local_ai.py          # 로컬 AI 기능 테스트
python test_hybrid_analysis.py   # 하이브리드 분석 테스트
```

## 📱 사용 방법

### GUI 사용법
1. **파일 선택**: "파일 선택" 버튼을 클릭하여 검토할 파일을 선택
2. **분석 모드 선택**: 
   - **빠른 검사 (키워드)**: 정규표현식 기반 즉시 분석
   - **AI 정밀 분석 (Claude)**: Claude API를 통한 맥락적 분석 (API 키 필요)
   - **로컬 AI 분석 (Ollama)**: 완전 오프라인 AI 분석 (Ollama 설치 필요)
3. **검토 시작**: "검토 시작" 버튼을 클릭하여 법규 위반사항 검사 시작
4. **결과 확인**: 
   - **요약 탭**: 전체적인 검토 결과와 위험도 확인 (AI 모드시 신뢰도, 비용 정보 포함)
   - **상세 결과 탭**: 개별 위반사항과 개선 제안 확인
   - **원본 텍스트 탭**: 추출된 원본 텍스트 확인
5. **결과 저장**: "결과 저장" 버튼으로 검토 결과를 파일로 저장

### 지원 파일 형식
- **문서**: PDF, DOCX, PPTX, TXT
- **이미지**: PNG, JPG, JPEG, BMP, TIFF (Tesseract OCR 필요)

### 분석 모드 비교

| 기능 | 빠른 검사 (키워드) | AI 정밀 분석 (Claude) | 로컬 AI 분석 (Ollama) |
|------|-------------------|---------------------|---------------------|
| **처리 시간** | 5-10초 | 30-60초 | 1-3분 |
| **정확도** | 70-80% | 90-95% | 80-90% |
| **비용** | 무료 | 건당 $0.001-0.01 | 무료 (설치 후) |
| **맥락 이해** | ❌ | ✅ | ✅ |
| **법적 근거** | 기본 | 상세 | 상세 |
| **개선 제안** | 일반적 | 맞춤형 | 맞춤형 |
| **오프라인 사용** | ✅ | ❌ | ✅ |
| **개인정보 보호** | ✅ | ❌ | ✅ |
| **신뢰도 점수** | ❌ | ✅ | ✅ |
| **시스템 요구사항** | 낮음 | 낮음 | 높음 (8GB+ RAM) |

## 📋 검출 가능한 위반사항

### 의약품적 표현
- ❌ "치료", "완치", "의학적 효과"
- ❌ "항균", "살균", "바이러스 차단"
- ✅ 대안: "케어", "개선", "세정 효과"

### 효능 과장
- ❌ "100% 효과", "완벽한", "즉시", "하루만에"
- ❌ "영구적", "평생", "절대", "무조건"
- ✅ 대안: "도움을 줄 수 있는", "점진적 개선"

### 안전성 허위
- ❌ "부작용 없음", "100% 안전", "완전히 안전"
- ❌ "알레르기 반응 없음", "자극 없음"
- ✅ 대안: "테스트를 거친", "개인차가 있을 수 있음"

### 최상급 표현
- ❌ "최고", "최상", "최적", "1위", "세계 최초"
- ❌ "유일한", "독보적", "독창적"
- ✅ 대안: 객관적 근거가 있는 경우에만 사용

### 비교광고 위반
- ❌ "타제품보다", "경쟁사보다", "비교 불가"
- ✅ 대안: 객관적 근거 자료와 함께 제시

## 📊 테스트 결과 예시

샘플 텍스트 검사 결과:
```
=== 검토 결과 ===
상태: VIOLATION_FOUND
총 위반사항: 17건
위험도: HIGH

심각도별 분류:
• 높음: 9건
• 중간: 8건  
• 낮음: 0건

위반 유형:
• 의약품적 표현
• 효능 과장
• 안전성 허위
• 최상급 표현
• 비교광고 위반
```

## 🏗️ 프로젝트 구조

```
dayoungmon/
├── src/
│   ├── core/
│   │   ├── file_processor.py      # 파일 처리 및 텍스트 추출
│   │   ├── regulation_checker.py  # 기본 법규 위반사항 검출
│   │   ├── ai_analyzer.py         # Claude AI 기반 법규 분석
│   │   ├── local_ai_analyzer.py   # 로컬 AI (Ollama) 기반 분석
│   │   └── hybrid_analyzer.py     # 하이브리드 분석 시스템
│   ├── ui/
│   │   └── main_window.py         # GUI 인터페이스 (3가지 모드 지원)
│   └── data/
├── assets/
│   └── sample_text.txt            # 테스트용 샘플 파일
├── tests/
├── docs/
├── main.py                        # 메인 애플리케이션
├── test_basic.py                  # 기본 기능 테스트
├── test_ai_features.py            # Claude AI 기능 테스트
├── test_local_ai.py               # 로컬 AI 기능 테스트
├── test_hybrid_analysis.py        # 하이브리드 분석 테스트
├── requirements.txt               # 의존성 패키지 (Ollama 포함)
├── .env.example                   # 환경 변수 템플릿 (로컬 AI 설정 포함)
├── bash.md                        # 개발 과정 bash 명령어 기록
├── plan.md                        # 전체 개발 로드맵
└── README.md
```

## 🔧 개발 로드맵

자세한 개발 계획은 [plan.md](plan.md) 를 참조하세요.

### Phase 1: 기본 키워드 검사 ✅
- [x] 파일 처리 모듈 구현
- [x] 정규표현식 기반 위반사항 검출
- [x] GUI 인터페이스 구현
- [x] 기본 테스트 완료

### Phase 2: AI API 통합 ✅
- [x] Claude API 연동
- [x] 화장품법 전문가 프롬프트 엔지니어링
- [x] 맥락적 분석 기능 추가
- [x] 비용 관리 및 사용량 모니터링
- [x] AI/기본 검사 성능 비교 기능

### Phase 3: 로컬 AI 구현 ✅
- [x] Ollama 연동 모듈 구현
- [x] 로컬 AI 분석 기능 추가
- [x] UI에 로컬 AI 모드 통합
- [x] 하이브리드 분석 시스템 구축
- [x] 성능 비교 및 최적 모드 추천 기능

## 🤝 기여하기

이 프로젝트는 학습 목적으로 개발되었습니다. 개선사항이나 버그 리포트는 언제든 환영합니다!

## ⚖️ 법적 고지

이 도구는 참고용으로만 사용하시기 바랍니다. 최종적인 법규 준수 여부는 반드시 전문가의 검토를 받으시기 바랍니다.

## 📝 라이선스

MIT License

---

**개발자**: 화장품 품질관리 전문팀  
**목적**: 생산성 향상 및 코드 학습  
**버전**: 3.0.0 (전체 Phase 1 + 2 + 3 완료)
