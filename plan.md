# 화장품 품질관리 법규 검토 툴 - 구현방식별 상세 계획

## 📋 전체 개발 로드맵

### Phase 1: 기본 키워드 검사 (2-3주)
- 정규표현식 기반 위반사항 검출
- 파일 업로드 및 텍스트 추출
- 기본 UI 구현

### Phase 2: AI API 통합 (1-2주)
- Claude/GPT API 연동
- 맥락적 분석 기능 추가
- 결과 비교 및 검증

### Phase 3: 로컬 AI 구현 (2-3주)
- Ollama 설치 및 설정
- 한국어 모델 최적화
- 성능 비교 분석

---

## 🎯 방식 1: 기본 키워드 검사 (Python + Tkinter)

### 개발 목표
완전 오프라인으로 작동하는 기본적인 법규 위반 검출 시스템

### 상세 계획

#### Week 1: 기반 구축
**Day 1-2: 환경 설정**
- Python 가상환경 생성
- 필요 라이브러리 설치 (tkinter, pytesseract, PyPDF2, Pillow)
- Tesseract OCR 프로그램 설치
- 기본 프로젝트 구조 생성

**Day 3-4: 파일 처리 모듈**
- PDF 텍스트 추출 함수
- 이미지 OCR 처리 함수
- 지원 파일 형식 확장 (DOCX, PPTX)
- 텍스트 전처리 (노이즈 제거, 정규화)

**Day 5-7: 기본 UI 구현**
- 메인 윈도우 레이아웃
- 파일 선택 및 드래그앤드롭
- 진행상황 표시 바
- 결과 표시 영역

#### Week 2: 검증 엔진
**Day 8-10: 법규 데이터베이스 구축**
- 화장품법 위반 키워드 수집
  - 의약품적 표현: "치료", "완치", "의학적 효과" 등
  - 효능 과장: "100% 효과", "즉시", "완벽한" 등
  - 안전성 허위: "부작용 없음", "무해한" 등
- 광고표시법 위반 키워드
  - 최상급 표현: "최고", "1위", "최적" 등
  - 비교광고 위반: 근거 없는 비교 표현
- 정규표현식 패턴 작성

**Day 11-12: 검증 로직 구현**
- 키워드 매칭 알고리즘
- 문맥 고려 기본 로직
- 위반 심각도 분류 (높음/중간/낮음)
- 개선 제안 템플릿

**Day 13-14: 결과 처리**
- 위반사항 분류 및 표시
- 해당 문구 하이라이트
- 법적 근거 및 개선안 제시
- 결과 내보내기 (Excel, PDF)

#### Week 3: 완성 및 테스트
**Day 15-17: 고도화**
- 예외 처리 및 에러 핸들링
- 성능 최적화
- UI/UX 개선
- 설정 파일 관리

**Day 18-21: 테스트 및 배포**
- 다양한 파일 형식 테스트
- 실제 화장품 광고 샘플로 검증
- PyInstaller로 실행파일 생성
- 사용자 매뉴얼 작성

### 예상 결과물
- 오프라인 실행 가능한 exe 파일
- 기본적인 법규 위반 검출 (정확도 70-80%)
- 빠른 처리 속도 (파일당 5-10초)

---

## 🤖 방식 2: AI API 통합 (Claude/GPT)

### 개발 목표
AI의 맥락 이해 능력을 활용한 고도화된 법규 위반 분석

### 상세 계획

#### Week 1: API 연동
**Day 1-2: API 환경 설정**
- Claude API 키 발급 및 설정
- OpenAI API 키 발급 및 설정
- API 호출 테스트 및 응답 확인
- 비용 관리 설정 (사용량 제한)

**Day 3-4: 프롬프트 엔지니어링**
- 화장품법 전문가 페르소나 설정
- 구조화된 분석 요청 프롬프트
```
역할: 화장품법 및 광고표시법 전문가
입력: 화장품 광고 텍스트
출력 형식:
1. 위반사항 (있다면)
   - 위반 문구: [정확한 문구]
   - 관련 법령: [구체적 조항]
   - 위반 이유: [상세 설명]
   - 위험도: [높음/중간/낮음]
   - 개선안: [구체적 제안]
2. 법적 리스크 평가
3. 종합 의견
```

**Day 5-7: 기존 시스템 통합**
- 기본 키워드 검사 + AI 분석 파이프라인
- AI 호출 조건 설정 (의심 항목 있을 때만)
- 결과 비교 및 검증 로직

#### Week 2: 고도화 및 최적화
**Day 8-10: 다중 AI 비교**
- Claude vs GPT-4 성능 비교
- 각 모델별 강점 영역 파악
- 앙상블 방식 구현 (중요한 경우 2개 모델 교차검증)

**Day 11-14: 스마트 비용 관리**
- 토큰 사용량 계산 및 최적화
- 캐싱 시스템 (동일 텍스트 재검사 방지)
- 배치 처리 옵션
- 사용량 리포트 및 알림

### 예상 결과물
- 맥락을 이해하는 정확한 분석 (정확도 90-95%)
- 상세한 법적 근거 및 개선안 제시
- 월 사용 비용: $20-50 (개인 사용 기준)

---

## 🏠 방식 3: 로컬 AI 구현 (Ollama)

### 개발 목표
완전 오프라인에서 작동하는 AI 기반 법규 검토 시스템

### 상세 계획

#### Week 1: 환경 구축
**Day 1-3: Ollama 설치 및 설정**
- Ollama 다운로드 및 설치
- 한국어 지원 모델 탐색
  - llama2-ko (13B)
  - solar-ko (10.7B)
  - kullm-polyglot-12.8b-v2
- 모델별 성능 테스트

**Day 4-7: 모델 파인튜닝 준비**
- 화장품법 관련 데이터셋 수집
- 법령 조문 및 위반 사례 정리
- 학습 데이터 포맷 변환
- 로컬 GPU 성능 최적화

#### Week 2: 모델 최적화
**Day 8-12: 전용 모델 개발**
- 기본 모델에 화장품법 지식 추가 학습
- 프롬프트 템플릿 최적화
- 응답 속도 vs 정확도 튜닝
- 메모리 사용량 최적화

**Day 13-14: 시스템 통합**
- Python에서 Ollama API 호출
- 로컬 AI와 기본 검사 조합
- 처리 속도 개선 (멀티스레딩)

#### Week 3: 성능 비교 및 최적화
**Day 15-17: 성능 벤치마크**
- 로컬 AI vs API 서비스 정확도 비교
- 처리 속도 측정
- 리소스 사용량 모니터링
- 실제 사용 시나리오 테스트

**Day 18-21: 최종 최적화**
- 모델 압축 및 양자화
- 배치 처리 최적화
- 사용자 피드백 학습 시스템
- 오프라인 업데이트 메커니즘

### 예상 결과물
- 완전 오프라인 AI 분석 시스템
- 초기 설정 후 추가 비용 없음
- 정확도 80-90% (API 대비 약간 낮음)
- 높은 시스템 요구사양 (RAM 16GB+, GPU 권장)

---

## 📊 3가지 방식 통합 계획

### Week 4-5: 통합 시스템 개발
**목표: 사용자가 상황에 따라 선택할 수 있는 하이브리드 시스템**

#### 선택 가능한 모드
1. **빠른 검사 모드** (키워드 기반)
   - 처리시간: 5-10초
   - 정확도: 70-80%
   - 비용: 무료

2. **정확한 검사 모드** (AI API)
   - 처리시간: 30-60초
   - 정확도: 90-95%
   - 비용: 건당 $0.1-0.5

3. **오프라인 AI 모드** (로컬 AI)
   - 처리시간: 60-120초
   - 정확도: 80-90%
   - 비용: 무료 (초기 설정 후)

#### 스마트 라우팅 시스템
```
사용자 입력 파일
    ↓
기본 키워드 검사
    ↓
위반 의심 항목 발견?
    ↓ (Yes)
사용자 선택: [빠른결과] [정확한분석] [오프라인AI]
    ↓
해당 모드로 상세 분석
    ↓
결과 통합 및 표시
```

### Week 6: 사용성 및 배포
**최종 완성 및 사용자 경험 최적화**

#### 기능 완성
- 직관적인 모드 선택 UI
- 각 모드별 예상 시간/비용 표시
- 결과 비교 기능 (여러 모드 동시 실행)
- 상세한 사용 통계 및 리포트

#### 배포 준비
- 통합 설치 패키지 생성
- 사용자 가이드 및 튜토리얼
- 트러블슈팅 가이드
- 업데이트 메커니즘

---

## 🎯 성공 지표 및 검증 방법

### 기술적 지표
- **정확도**: 실제 화장품 광고 100건으로 테스트
- **처리속도**: 방식별 벤치마크 측정
- **사용성**: 직관적 인터페이스 평가

### 실용성 지표
- **비용 효율성**: 월 사용 비용 vs 시간 절약 가치
- **학습 곡선**: 초보자도 10분 내 사용 가능
- **신뢰성**: 연속 사용 시 안정성

### 검증 데이터셋
1. **공개 위반 사례**: 식약처 공개 자료
2. **실제 광고 샘플**: 온라인 화장품 광고 100건
3. **경계 사례**: 애매한 표현들의 판정 일관성

